{% extends 'base.html' %}

{% block content %}

{% if error %}
<div class="alert alert-danger" role="alert">
    <i class="fa-solid fa-triangle-exclamation"></i> {{ error }}
</div>
<div class="alert alert-light">
    <h5>Search another device?</h5>
    <form>
        <input type="text" class="form-control mb-2" style="max-width: 50%;" name="search_serial_number">
        <button type="submit" class="btn btn-primary">Search</button>
    </form>
</div>
{% else %}
<div class="container-fluid" style="width: 90%;">
    <form method="POST" action="/api/devices">
        <h3>Device Information</h3>
        <div class="row">
            <div class="col mb-3">
                <label for="serial_number" class="form-label">Serial Number</label>
                <input type="text" class="form-control" id="serial_number" name="serial_number" value="{{ device.serial_number }}" required>
            </div>
            <div class="col mb-3">
                <label for="purchase_date" class="form-label">Purchase Date</label>
                <input type="date" class="form-control" id="purchase_date" name="purchase_date" value="{{ device.purchase_date }}" required>
            </div>
        </div>
        <div class="row">
            <div class="col mb-3">
                <label for="type" class="form-label">Type</label>
                <input type="text" class="form-control" id="type" name="type" value="{{ device.type }}" required>
            </div>
            <div class="col mb-3">
                <label for="brand" class="form-label">Brand</label>
                <input type="text" class="form-control" id="brand" name="brand" value="{{ device.brand }}" required>
            </div>
            <div class="col mb-3">
                <label for="model" class="form-label">Model</label>
                <input type="text" class="form-control" id="model" name="model" value="{{ device.model }}" required>
            </div>
            <div class="col mb-3">
                <label for="os" class="form-label">Operating System</label>
                <input type="text" class="form-control" id="os" name="os" value="{{ device.operating_system }}" required>
            </div>
        </div>
        <hr>
        <h3>Hardware Information</h3>
        <h5>Processor</h5>
        <div class="row">
            <div class="col mb-3">
                <label for="cpu" class="form-label">CPU</label>
                <input type="text" class="form-control" id="cpu" name="cpu" value="{{ device.cpu }}" required>
            </div>
            <div class="col mb-3">
                <label for="gpu" class="form-label">GPU</label>
                <input type="text" class="form-control" id="gpu" name="gpu" value="{{ device.gpu }}">
            </div>
        </div>
        <h5>Memory</h5>
        <div class="row">
            <div class="col mb-3">
                <label for="physical_mem_type" class="form-label">Type</label>
                <input type="text" class="form-control" id="physical_mem_type" name="physical_mem_type" value="{{ device.physical_mem_type }}" required>
            </div>
            <div class="col mb-3">
                <label for="physical_mem_size_gb" class="form-label">RAM (GB)</label>
                <input type="number" class="form-control" id="physical_mem_size_gb" name="physical_mem_size_gb" value="{{ device.physical_mem_size_gb }}" required>
            </div>
            <div class="col mb-3">
                <label for="physical_mem_slots" class="form-label">RAM Slots</label>
                <input type="number" class="form-control" id="physical_mem_slots" name="physical_mem_slots" value="{{ device.physical_mem_slots }}" required>
            </div>
            <div class="col mb-3">
                <label for="physical_mem_slots_used" class="form-label">RAM Slots Used</label>
                <input type="number" class="form-control" id="physical_mem_slots_used" name="physical_mem_slots_used" value="{{ device.physical_mem_slots_used }}" required>
            </div>
        </div>
        <h5>Storage</h5>
        <div class="row">
            <div class="col mb-3">
                <label for="storage_type" class="form-label">Type</label>
                <input type="text" class="form-control" id="storage_type" name="storage_type" value="{{ device.storage_type }}" required>
            </div>
            <div class="col mb-3">
                <label for="storage_size_gb" class="form-label">Size (GB)</label>
                <input type="number" class="form-control" id="storage_size_gb" name="storage_size_gb" value="{{ device.storage_size_gb }}" required>
            </div>
        </div>
        <h5>Display</h5>
        <div class="row">
            <div class="col mb-3">
                <label for="display_type" class="form-label">Type</label>
                <input type="text" class="form-control" id="display_type" name="display_type" value="{{ device.internal_display_type }}">
            </div>
            <div class="col mb-3">
                <label for="display_size" class="form-label">Size (Inches)</label>
                <input type="text" class="form-control" id="display_size" name="display_size" value="{{ device.internal_display_size_inch }}">
            </div>
            <div class="col mb-3">
                <label for="display_resolution" class="form-label">Resolution (WxH; Pixels)</label>
                <input type="text" class="form-control" id="display_resolution" name="display_resolution" value="{{ device.internal_display_resolution }}">
            </div>
            <div class="col mb-3">
                <label for="is_touchscreen" class="form-label">Touchscreen?</label>
                <input type="text" class="form-control" id="is_touchscreen" name="is_touchscreen" value="{{ 'Yes' if device.is_touchscreen else 'No' }}">
            </div>
        </div>
        <hr>
        <h3>Network Information</h3>
        <div class="row">
            <div class="col mb-3">
                <label for="wireless_mac" class="form-label">Wi-Fi MAC Address</label>
                <input type="text" class="form-control" id="wireless_mac" name="wireless_mac" value="{{ device.wireless_mac }}" required>
            </div>
            <div class="col mb-3">
                <label for="ethernet_mac" class="form-label">Ethernet MAC Address</label>
                <input type="text" class="form-control" id="ethernet_mac" name="ethernet_mac" value="{{ device.ethernet_mac }}">
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Add Device</button>
    </form>
</div>
{% endif %}
{% endblock %}

{% block scripts %}
<script>
    document.querySelector('form').addEventListener("submit", function (e)
    {
        e.preventDefault();
        let serial_number = document.querySelector('input[name="search_serial_number"]').value;
        window.location.href = `/device/${serial_number}`;
    })
</script>
{% endblock %}